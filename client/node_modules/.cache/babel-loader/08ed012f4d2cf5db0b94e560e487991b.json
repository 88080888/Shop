{"ast":null,"code":"import _defineProperty from \"/Users/katarzynaiwaszko/Documents/projekty_Kodilla/Shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/katarzynaiwaszko/Documents/projekty_Kodilla/Shop/client/src/components/views/Product/Product.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport uniqid from 'uniqid';\nimport { connect } from 'react-redux';\nimport { getProductById, getProductByIdRequest } from '../../../redux/productsRedux';\nimport { addCartProductRequest } from '../../../redux/cartRedux';\nimport { ButtonBackHomepage } from '../../common/ButtonBackHomepage/ButtonBackHomepage';\nimport { ProductCount } from '../../features/ProductCount/ProductCount';\nimport { PhotoGallery } from '../../features/PhotoGallery/PhotoGallery';\nimport { formInputNumberParser } from '../../../utils';\nimport styles from './Product.module.scss';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport AddIcon from '@material-ui/icons/Add';\nimport LocalShippingIcon from '@material-ui/icons/LocalShipping';\nimport QueryBuilderIcon from '@material-ui/icons/QueryBuilder';\nimport Alert from '@material-ui/lab/Alert';\nimport Snackbar from '@material-ui/core/Snackbar';\n\nclass Component extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      orderData: {\n        totalPrice: 0,\n        quantity: 0\n      },\n      snackbar: {\n        snackbarOpen: false,\n        snackbarMessage: '',\n        alertSeverity: ''\n      }\n    };\n\n    this.snackbarClose = () => {\n      this.setState({\n        snackbar: {\n          snackbarOpen: false,\n          snackbarMessage: ''\n        }\n      });\n    };\n\n    this.handleChange = event => {\n      const orderData = this.state.orderData;\n      const _event$target = event.target,\n            value = _event$target.value,\n            id = _event$target.id;\n      const product = this.props.product;\n      const parsedValue = formInputNumberParser(value);\n      const totalPrice = parsedValue * product.price;\n      this.setState({\n        orderData: _objectSpread({}, orderData, {\n          [id]: parsedValue,\n          totalPrice: totalPrice\n        })\n      });\n    };\n\n    this.decreaseProductQuantity = () => {\n      const orderData = this.state.orderData;\n      const product = this.props.product;\n\n      if (orderData.quantity === 0) {\n        return;\n      }\n\n      const newQuantity = orderData.quantity - 1;\n      const totalPrice = newQuantity * product.price;\n      this.setState({\n        orderData: _objectSpread({}, orderData, {\n          quantity: newQuantity,\n          totalPrice: totalPrice\n        })\n      });\n    };\n\n    this.increaseProductQuantity = () => {\n      const orderData = this.state.orderData;\n      const product = this.props.product;\n\n      if (orderData.quantity === 999) {\n        return;\n      }\n\n      const newQuantity = orderData.quantity + 1;\n      const totalPrice = newQuantity * product.price;\n      this.setState({\n        orderData: _objectSpread({}, orderData, {\n          quantity: newQuantity,\n          totalPrice: totalPrice\n        })\n      });\n    };\n\n    this.addToCart = () => {\n      const orderData = this.state.orderData;\n      const _this$props = this.props,\n            product = _this$props.product,\n            addCartProductRequest = _this$props.addCartProductRequest;\n      const cartProduct = {};\n      let error = null;\n      if (orderData.totalPrice <= 0 || orderData.quantity <= 0 || orderData.quantity >= 1000) error = 'Number of chosen products is incorrect (1-999). Please double check...';else if (orderData.comment.length > 100) error = 'Number of comment chracters is invalid - max 100 charcters';\n\n      if (!error) {\n        cartProduct.id = uniqid();\n        cartProduct.photo = product.photo[0];\n        cartProduct.name = product.name;\n        cartProduct.quantity = orderData.quantity;\n        cartProduct.price = orderData.totalPrice;\n        cartProduct.comment = '';\n        cartProduct.totalPrice = orderData.totalPrice;\n        cartProduct.productId = product._id;\n        addCartProductRequest(cartProduct);\n        this.showAlert(error);\n      } else {\n        this.showAlert(error);\n      }\n    };\n  }\n\n  componentDidMount() {\n    const getProductByIdRequest = this.props.getProductByIdRequest;\n    getProductByIdRequest();\n  }\n\n  showAlert(error) {\n    if (error) {\n      this.setState({\n        snackbar: {\n          snackbarOpen: true,\n          snackbarMessage: error,\n          alertSeverity: 'error'\n        }\n      });\n    } else {\n      this.setState({\n        snackbar: {\n          snackbarOpen: true,\n          snackbarMessage: 'Product has been added to the cart',\n          alertSeverity: 'success'\n        }\n      });\n    }\n  }\n\n  render() {\n    const product = this.props.product;\n    const orderData = this.state.orderData;\n    return React.createElement(Paper, {\n      className: styles.root,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Snackbar, {\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'center'\n      },\n      open: snackbar.snackbarOpen,\n      autoHideDuration: 6000,\n      onClose: this.snackbarClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(Alert, {\n      variant: \"filled\",\n      severity: \"success\",\n      onClose: this.snackbarClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"snackbar.snackbarMessage\")), React.createElement(Grid, {\n      container: true,\n      xs: 12,\n      spacing: 2,\n      className: styles.gridContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(PhotoGallery, {\n      images: product.photo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 8,\n      container: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      item: true,\n      xs: true,\n      container: true,\n      direction: \"column\",\n      spacing: 2,\n      className: styles.text,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      className: styles.title,\n      gutterBottom: true,\n      variant: \"h3\",\n      component: \"h1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, product.name), React.createElement(Typography, {\n      variant: \"h4\",\n      component: \"p\",\n      className: styles.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, product.description), React.createElement(Typography, {\n      variant: \"h5\",\n      component: \"p\",\n      className: styles.totalPrice,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, \"Price: \", orderData.totalPrice, \"$\"), React.createElement(Grid, {\n      item: true,\n      xs: true,\n      container: true,\n      className: styles.featuresContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      className: styles.productCounterContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(ProductCount, {\n      handleChange: this.handleQuantityChange,\n      increase: this.increaseProductQuantity,\n      decrease: this.decreaseProductQuantity,\n      quantity: orderData.quantity,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      className: styles.infoAboutShip,\n      direction: \"column\",\n      justify: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      className: styles.shipInfoFree,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(LocalShippingIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }), React.createElement(Typography, {\n      className: styles.freeShipText,\n      variant: \"h6\",\n      component: \"span\",\n      gutterBottom: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"FREE SHIPPING FROM 200$\")), React.createElement(Grid, {\n      item: true,\n      className: styles.shipInfoTime,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(QueryBuilderIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }), React.createElement(Typography, {\n      className: styles.timeShipText,\n      variant: \"h6\",\n      component: \"span\",\n      gutterBottom: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"DELIVERY TIME: 4 WORKING DAYS\"))), React.createElement(Grid, {\n      item: true,\n      container: true,\n      className: styles.buttonsContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 6,\n      className: styles.buttonHomepage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(ButtonBackHomepage, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 6,\n      className: styles.buttonCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"contained\",\n      size: \"large\",\n      onClick: this.addToCart,\n      className: styles.button,\n      startIcon: React.createElement(AddIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, \"ADD TO CART\")))))))));\n  }\n\n}\n\nComponent.propTypes = {\n  product: PropTypes.object,\n  addCartProductRequest: PropTypes.func,\n  getProductByIdRequest: PropTypes.func\n};\n\nconst mapStateToProps = (state, props) => ({\n  product: getProductById(state, props.match.params.id)\n});\n\nconst mapDispatchToProps = (dispatch, props) => ({\n  addCartProductRequest: cartProduct => dispatch(addCartProductRequest(cartProduct)),\n  getProductByIdRequest: () => dispatch(getProductByIdRequest(props.match.params.id))\n});\n\nconst Container = connect(mapStateToProps, mapDispatchToProps)(Component);\nexport { Container as Product, Component as ProductComponent };","map":{"version":3,"sources":["/Users/katarzynaiwaszko/Documents/projekty_Kodilla/Shop/client/src/components/views/Product/Product.js"],"names":["React","PropTypes","uniqid","connect","getProductById","getProductByIdRequest","addCartProductRequest","ButtonBackHomepage","ProductCount","PhotoGallery","formInputNumberParser","styles","Paper","Typography","Button","Grid","AddIcon","LocalShippingIcon","QueryBuilderIcon","Alert","Snackbar","Component","state","orderData","totalPrice","quantity","snackbar","snackbarOpen","snackbarMessage","alertSeverity","snackbarClose","setState","handleChange","event","target","value","id","product","props","parsedValue","price","decreaseProductQuantity","newQuantity","increaseProductQuantity","addToCart","cartProduct","error","comment","length","photo","name","productId","_id","showAlert","componentDidMount","render","root","vertical","horizontal","gridContainer","text","title","description","featuresContainer","productCounterContainer","handleQuantityChange","infoAboutShip","shipInfoFree","freeShipText","shipInfoTime","timeShipText","buttonsContainer","buttonHomepage","buttonCart","button","propTypes","object","func","mapStateToProps","match","params","mapDispatchToProps","dispatch","Container","Product","ProductComponent"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport uniqid from 'uniqid';\n\nimport { connect } from 'react-redux';\nimport { getProductById, getProductByIdRequest } from '../../../redux/productsRedux';\nimport { addCartProductRequest } from '../../../redux/cartRedux';\n\nimport { ButtonBackHomepage } from '../../common/ButtonBackHomepage/ButtonBackHomepage';\nimport { ProductCount } from '../../features/ProductCount/ProductCount';\nimport { PhotoGallery } from '../../features/PhotoGallery/PhotoGallery';\nimport { formInputNumberParser } from '../../../utils';\n\nimport styles from './Product.module.scss';\n\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport AddIcon from '@material-ui/icons/Add';\nimport LocalShippingIcon from '@material-ui/icons/LocalShipping';\nimport QueryBuilderIcon from '@material-ui/icons/QueryBuilder';\nimport Alert from '@material-ui/lab/Alert';\nimport Snackbar from '@material-ui/core/Snackbar';\n\nclass Component extends React.Component {\n\n  state = {\n    orderData: {\n      totalPrice: 0,\n      quantity: 0,\n    },\n    snackbar: {\n      snackbarOpen: false,\n      snackbarMessage: '',\n      alertSeverity: '',\n    },\n  }\n\n  static propTypes = {\n    product: PropTypes.object,\n    addCartProductRequest: PropTypes.func,\n    getProductByIdRequest: PropTypes.func,\n  }\n\n  componentDidMount() {\n    const { getProductByIdRequest } = this.props;\n    getProductByIdRequest();\n  }  \n\n  snackbarClose = () => {\n    this.setState({\n      snackbar: {\n        snackbarOpen: false,\n        snackbarMessage: '',\n      },\n    });\n  }\n\n  handleChange = (event) => {\n    const { orderData } = this.state;\n    const { value, id } = event.target;\n    const { product } = this.props;\n\n    const parsedValue = formInputNumberParser(value);\n    const totalPrice = parsedValue * product.price;\n\n    this.setState({\n      orderData: {\n        ...orderData,\n        [id]: parsedValue,\n        totalPrice: totalPrice,\n      },\n    });\n  }\n\n  decreaseProductQuantity = () => {\n    const { orderData } = this.state;\n    const { product } = this.props;\n\n    if (orderData.quantity === 0) {\n      return;\n    }\n\n    const newQuantity = orderData.quantity - 1;\n\n    const totalPrice = newQuantity * product.price;\n\n    this.setState({\n      orderData: {\n        ...orderData,\n        quantity: newQuantity,\n        totalPrice: totalPrice,\n      },\n    });\n  }\n\n  increaseProductQuantity = () => {\n    const { orderData } = this.state;\n    const { product } = this.props;\n\n    if (orderData.quantity === 999) {\n      return;\n    }\n\n    const newQuantity = orderData.quantity + 1;\n    const totalPrice = newQuantity * product.price;\n\n    this.setState({\n      orderData: {\n        ...orderData,\n        quantity: newQuantity,\n        totalPrice: totalPrice,\n      },\n    });\n  }\n\n  showAlert(error) {\n\n    if(error) {\n      this.setState({\n        snackbar: {\n          snackbarOpen: true,\n          snackbarMessage: error,\n          alertSeverity: 'error',\n        },\n      });\n    }\n    else {\n      this.setState({\n        snackbar: {\n          snackbarOpen: true,\n          snackbarMessage: 'Product has been added to the cart',\n          alertSeverity: 'success',\n        },\n      });\n    }\n  }\n\n  addToCart = () => {\n    const { orderData } = this.state;\n    const { product, addCartProductRequest } = this.props;\n\n    const cartProduct = {};\n\n    let error = null;\n\n    if(orderData.totalPrice <= 0 || orderData.quantity <=0 || orderData.quantity >=1000) error ='Number of chosen products is incorrect (1-999). Please double check...';\n    else if(orderData.comment.length > 100) error ='Number of comment chracters is invalid - max 100 charcters';\n\n    if(!error) {\n      cartProduct.id = uniqid();\n      cartProduct.photo = product.photo[0];\n      cartProduct.name = product.name;\n      cartProduct.quantity = orderData.quantity;\n      cartProduct.price = orderData.totalPrice;\n      cartProduct.comment = '';\n      cartProduct.totalPrice = orderData.totalPrice;\n      cartProduct.productId = product._id;\n\n      addCartProductRequest(cartProduct);\n      this.showAlert(error);\n    }\n    else {\n      this.showAlert(error);\n    }\n  }\n\n  render() {\n    const {product} = this.props;\n    const { orderData } = this.state;\n\n    return(\n      <Paper className={styles.root}>\n        <Snackbar\n          anchorOrigin={{vertical: 'top', horizontal: 'center'}}\n          open={snackbar.snackbarOpen}\n          autoHideDuration={6000}\n          onClose={this.snackbarClose}\n        >\n          <Alert\n            variant='filled'\n            severity='success'\n            onClose={this.snackbarClose}\n          >\n            snackbar.snackbarMessage\n          </Alert>\n        </Snackbar>\n\n        <Grid container xs={12} spacing={2} className={styles.gridContainer}>\n\n          <Grid item xs={12} sm={4}>\n                <PhotoGallery\n                  images={product.photo}\n                />\n          </Grid>\n\n          <Grid item xs={12} sm={8} container>\n            <Grid item item xs container direction=\"column\" spacing={2} className={styles.text}>\n              <Typography               \n                className={styles.title}\n                gutterBottom\n                variant='h3'\n                component='h1'\n              >\n                {product.name}            \n              </Typography>\n              <Typography\n              variant='h4'\n              component='p'\n              className={styles.description}\n              >\n              {product.description}\n              </Typography>\n              <Typography\n                variant='h5'\n                component='p'\n                className={styles.totalPrice}\n              >\n                Price: {orderData.totalPrice}$\n              </Typography>\n\n            <Grid item xs container className={styles.featuresContainer}>\n\n              <Grid item className={styles.productCounterContainer}>\n                <ProductCount\n                  handleChange={this.handleQuantityChange}\n                  increase={this.increaseProductQuantity}\n                  decrease={this.decreaseProductQuantity}\n                  quantity={orderData.quantity}\n                />\n              </Grid>\n\n              <Grid item className={styles.infoAboutShip}  direction='column' justify='center'>\n                <Grid item className={styles.shipInfoFree}>\n                  <LocalShippingIcon />\n                  <Typography               \n                  className={styles.freeShipText}\n                  variant='h6'\n                  component='span'\n                  gutterBottom\n                  >\n                    FREE SHIPPING FROM 200$         \n                  </Typography>\n                </Grid>\n\n                <Grid item className={styles.shipInfoTime}>\n                  <QueryBuilderIcon />\n                  <Typography               \n                  className={styles.timeShipText}\n                  variant='h6'\n                  component='span'\n                  gutterBottom\n                  >\n                    DELIVERY TIME: 4 WORKING DAYS          \n                  </Typography>\n                </Grid>\n              </Grid>\n\n            <Grid item container className={styles.buttonsContainer}>\n              <Grid item xs={12} md={6} className={styles.buttonHomepage}>\n                <ButtonBackHomepage />\n              </Grid>\n\n              <Grid item xs={12} md={6} className={styles.buttonCart}>\n                <Button\n                  variant='contained'\n                  size='large'\n                  onClick={this.addToCart}\n                  className={styles.button}\n                  startIcon={<AddIcon />}\n                >\n                  <span>ADD TO CART</span>\n                </Button>\n              </Grid>\n            </Grid>\n            </Grid>\n            </Grid>  \n          </Grid>\n\n        </Grid>\n      </Paper>\n    );\n  }\n}\n\nconst mapStateToProps = (state, props) => ({\n  product: getProductById(state, props.match.params.id),\n});\n\nconst mapDispatchToProps = (dispatch,props) => ({\n  addCartProductRequest: cartProduct => dispatch(addCartProductRequest(cartProduct)),\n  getProductByIdRequest: () => dispatch(getProductByIdRequest(props.match.params.id)),\n});\n\nconst Container = connect(mapStateToProps, mapDispatchToProps)(Component);\n\nexport {\n  Container as Product,\n  Component as ProductComponent,\n};\n"]},"metadata":{},"sourceType":"module"}